写一个完整可执行的代码，完成Kaggle的Titanic题目。

代码不仅要能够成功运行，还要追求尽可能高的预测准确率。为了做到预测准确率尽可能高，需要做到以下两点：
1) 在基础的特征工程之外，还需要提炼家庭生存率特征，家庭生存率对提高预测准确率至关重要。
2) 需要进行模型选择和调参。

关于提炼家庭生存率特征，按照以下方式实现：
1) 用姓氏和票价来圈定“家庭”，票价实际上是对应整个家庭的票价。
2) 计算家庭生存率时，应该把训练数据集和测试数据集的所有人放在一起进行，以确保训练数据和测试数据拥有一样的特征。
3) 每个人的家庭生存率的计算应该按照这个逻辑：除了他本人之外，家庭中其他已知生死的家庭成员，他们的生存率。每个人的家庭生存率计算中，一定要排除他本人，以免他自己的生存与否信息泄露到他的训练数据中，导致模型过拟合于训练数据。

要避免过拟合，注意以下几点：
1) 只保留重要的特征参与训练，不重要的特征不要参与训练。
2) 进行调参时，max_depth最大值不要太高，最高不要超过10。

